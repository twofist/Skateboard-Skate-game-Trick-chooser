<meta charset="utf-8">

<style type="text/css">
	.cards img{
		position: relative;
		margin: 1em;
	}
	
	#image1{
		position: relative;
		float: left;
	}
    #image2{
		position: relative;
		float: left;
	}
	#image3{
		position: relative;
		float: left;
	}
	#image4{
		position: relative;
		float: left;
	}
	
	h1{
		position: absolute;
		left: 70px;
		top: 5px;
	}
	
	h2{
		position: absolute;
		left:80px;
		top:90px;
		visibility: hidden;
	}
	
	h3{
		position: absolute;
		left:80px;
		top:190px;
		visibility: hidden;
	}
	
	.tries{
		float: left;
	}
	
	#triesnum{
		float: right;
	}
	
</style>

<div class="text">
	Skateboarding Skate game trick chooser, Click on the card to choose a trick!
	<br>
	The more cards you choose, the more tries you get.
	<br>
	Have fun!
	<br>
</div>

	<br>
	<br>
	<br>
	<br>
	
<div class="cards">
	<div id="image1">
		<img src="images/cardback.png" id="trick" onclick="changeimage(this)">
		<h1>Trick</h1>
		<h2>empty</h2>
		<h3>+1 tries</h3>
	</div>
	<div id="image2">
		<img src="images/cardback.png" id="stance" onclick="changeimage(this)">
		<h1>Stance</h1>
		<h2>empty</h2>
		<h3>+1 tries</h3>
	</div>
	<div id= "image3">
		<img src="images/cardback.png" id="obstacle" onclick="changeimage(this)">
		<h1>Obstacle</h1>
		<h2>empty</h2>
		<h3>+1 tries</h3>
	</div>
	<div id= "image4">
		<img src="images/cardback.png" id="random" onclick="changeimage(this)">
		<h1>Random</h1>
		<h2>empty</h2>
		<h3>+1 tries</h3>
	</div>
</div>

<button type="button" onclick="landed(this)">Landed</button>
<button type="button" onclick="failed(this)">Take the L</button>
<br>
<div class="tries">Max tries: <div id="triesnum">0</div></div>
<br>
<div class="players">
	<button type="button" onclick="addplayers(this)">Add more players</button>
	<div id="players">Players: </div>
</div>
<br>
<button type="button" onclick="reset(this)">Reset</button>

<script type="text/javascript" src="skatetricks.json">
	const jsondata = JSON.parse(skatetricks.json);
</script>

<script language="javascript">
var players=[],amount=0,currentplayer=0;function addplayers(a){amount++;players.push(new Player(amount));var b=players[amount-1];a.parentNode.innerHTML+="<div id="+b.number+">"+b.player+": "+b.skate+"</div>"}function Player(a){this.player="Player "+a;this.status=!0;this.skate="";this.count=0;this.number=a}
function landed(){if("back.png"!==document.getElementById("image1").childNodes[1].src.split("card")[1]){currentplayer++;for(var a=0;4>a;a++){var b=document.getElementById("image"+(a+1)).childNodes[1];"front.jpg"===b.src.split("card")[1]&&changeimage(b)}}}
function failed(){if(!(1>players.length)&&"back.png"!==document.getElementById("image1").childNodes[1].src.split("card")[1]){currentplayer>players.length-1&&(currentplayer=0);for(var a=players[currentplayer],b=0;!a.status&&b<2*players.length;)currentplayer++,b++,currentplayer>players.length-1&&(currentplayer=0),a=players[currentplayer];a.count++;switch(a.count){case 1:a.skate+="S";break;case 2:a.skate+="k";break;case 3:a.skate+="a";break;case 4:a.skate+="t";break;case 5:a.skate+="e";a.status=!1;break;
default:a.status&&console.log("error")}currentplayer++;document.getElementById(a.number).innerHTML=a.player+": "+a.skate;for(a=0;4>a;a++)b=document.getElementById("image"+(a+1)).childNodes[1],"front.jpg"===b.src.split("card")[1]&&changeimage(b)}}function changeimage(a){document.getElementById(a.id).src=imagetouse(a)}
function imagetouse(a){var b=a.src.split("card")[1];if("back.png"===b)return document.getElementById("triesnum").innerHTML=parseInt(document.getElementById("triesnum").innerHTML)+1,a.parentNode.childNodes[5].style.visibility="visible",setcorrectdata(a),a.parentNode.childNodes[7].style.visibility="visible","images/cardfront.jpg";if("front.jpg"===b)return document.getElementById("triesnum").innerHTML=parseInt(document.getElementById("triesnum").innerHTML)-1,a.parentNode.childNodes[5].style.visibility=
"hidden",a.parentNode.childNodes[7].style.visibility="hidden","images/cardback.png";document.getElementById("tries").innerHTML="error"}
function setcorrectdata(a){var b=a.parentNode.childNodes[3].innerHTML;"Trick"===b?a.parentNode.childNodes[5].innerHTML=skatetricks.Trick[Math.floor(Math.random()*skatetricks.Trick.length)]:"Stance"===b?a.parentNode.childNodes[5].innerHTML=skatetricks.Stance[Math.floor(Math.random()*skatetricks.Stance.length)]:"Obstacle"===b?a.parentNode.childNodes[5].innerHTML=skatetricks.Obstacle[Math.floor(Math.random()*skatetricks.Obstacle.length)]:"Random"===b?a.parentNode.childNodes[5].innerHTML=skatetricks.Random[Math.floor(Math.random()*
skatetricks.Random.length)]:console.log("error")}function reset(){location.reload()};
</script>
